<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Arthur Lui">
    <title>Cucumber</title>

    <!-- Bootstrap Core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="/css/clean-blog.min.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <!--link href="/css/font-awesome.min.css" rel="stylesheet"-->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- My CSS-->
    <link rel="stylesheet" type="text/css" href="/css/mystyle.css" />

    <!--MathJax-->
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!--d3. Not necessary. Just for exploration.-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <!-- jQuery -->
    <script src="/js/jquery.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>
    <!-- Custom Theme JavaScript -->
    <script src="/js/clean-blog.min.js"></script>
    <!-- HTML File Inclusions-->
    <!-- Cucumber. Needs jQuery. -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timeago/1.4.1/jquery.timeago.js"></script>
    <script type="text/javascript" src="https://cdn.firebase.com/js/client/2.2.5/firebase.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.7.0/mustache.min.js"></script>
    <script type="text/javascript" src="/js/jquery.elastic.source.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/cucumber.css">
    <script> $(function(){$("#cucumber").load("/chunks/cucumber.html");}); </script> 

    <!--other chunk inclusions-->
    <script> 
     $(function(){
       $("#includeFooter").load("/chunks/myFooter.html"); 
       $("#includeNav").load("/chunks/myNav.html"); 
     });
    </script> 

    <!--highlight: For syntax code highlighting.-->
    <link rel="stylesheet" href="/highlight/styles/default.css">
    <script src="/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
      <div id="includeNav"></div>
    </nav>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" 
      style=" background-image: url('');  
             background-color:#2D782D">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="page-heading">
                          
                            <h1>Cucumber</h1>
                          
                            
                            <hr class="small">
                            <span class="subheading">A Minimalist Commenting System</span>
                          
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>Cucumber is a minimalist commenting system. It is still in the works...  As of
today (27 May, 2015), users can login via Facebook, Google, or Github, and
leave, edit and remove comments. It&#39;s open source so you can modify features as
needed. Cucumber uses Firebase to store data. For users who have not used
Firebase before, I have posted a tutorial to teach you how to set up your own
cucumber-firebase commenting system. Eventually, I would love to add inline
commenting, like, flag, reply, notification, as well as image / video posting
capabilities.</p>

<p>While there are other (more developed) commenting systems like Disqus, I wanted
something more minimalist and malleable. I also feel that users should be able
to comment using the common social media apps already existing.</p>

<p>Feel free to leave me a comment...</p>

<hr>

<h1>Tutorial</h1>

<p>To use cucumber, you will first need (1) a Firebase account, and (2) Facebook /
Google / Github apps. Then, all you need to do is reference the relevant
javascript and css files. I will walk you through the set-up of the firebase
account and google app, and direct you to a github repository for a simple
demo.</p>

<h2>Firebase Account</h2>

<p>If you don&#39;t already have one, you should first set up a <a href="https://www.firebase.com/login/">firebase
account</a>. Firebase is a realtime database that
allows users to easily authenticate through Facebook, Google, Github, Twitter,
or email and password.
<div><img class='eg'src='img/firelogin.png'></div></p>

<h2>Firebase App</h2>

<p>Next, you should create a firebase app. It is as simple as setting up an email
account. Just go to your firebase account and look for this page:
<div><img class='eg'src='img/fireapp.png'></div></p>

<p>Then in the &quot;CREATE NEW APP&quot; box, and under App Names, type a name for your app (e.g. &#39;mycucumberapp&#39;). The App URL will be automatically filled in for you.</p>

<h2>Firebase Rules</h2>

<p>Firebase rules protect users data from other users. For example, by specifying a
set of rules, you can allow authenticated users to write comments, and edit
their own comments, and prevent users from editing other users&#39; comments. The
set of rules I used are:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">{
  &quot;rules&quot;: {
    &quot;.read&quot;: true,
    &quot;comments&quot;: {
      &quot;$slug&quot; :{
        &quot;$commentID&quot;: {
          //&quot;.write&quot;: &quot;auth != null &amp;&amp; !data.exists()&quot;,
          &quot;.write&quot;: &quot;auth != null &amp;&amp; 
            (!data.exists() || ((data.child(&#39;userid&#39;).val()) === auth.uid))&quot;,
          &quot;.validate&quot;: &quot;newData.hasChildren([&#39;userid&#39;, &#39;name&#39;, &#39;body&#39;])&quot;,
            &quot;body&quot;: {
              &quot;.validate&quot;:&quot;newData.isString()&quot;
            },
            &quot;userid&quot;: {
            &quot;.validate&quot;:&quot;(newData.val() == auth.uid)&quot;
            },
            &quot;name&quot;: {
              &quot;.validate&quot;: &quot;newData.isString()&quot;
            },
            &quot;picture&quot;: { //url to profile picture
              &quot;.validate&quot;: &quot;newData.isString()&quot;
            },
            &quot;time&quot;: {
              &quot;.validate&quot;: &quot;newData.isString()&quot;
            }
        }
      }
    }
  }
}
</code></pre></div>
<p>To add rules, just navigate to &quot;Security and Rules&quot; tab, on your app, and paste
the rules. My rules allow the world to view comments, but only authenticated
users can write comments. Furthermore, you can only edit and remove your own
comments.
<div><img class="eg" src="img/rules.png"></div></p>

<h2>Login &amp; Authentication</h2>

<p>Next, go to the &quot;Login &amp; Authentication&quot; tab. To add Cucumber to your site, you
will need to enter your website&#39;s URL. Just the homepage will do. At the bottom
of the page, go through each of the tabs and enable the services you want. The
screen below is what your page should look like for enabling Google
authentication.
<div><img class='eg'src='img/authLogin.png'></div></p>

<h2>Google App</h2>

<p>Last of all, to fill out the Google Client ID and Secret, you simply click on
&#39;Learn more&#39; and follow the instructions under &#39;Configuring Your Application.
The configuration should take no more than 5 minutes. It&#39;s a short section but
each step is important.</p>

<h2>Adding Cucumber Code</h2>

<p>Finally, all that is left to do is to put the right chunks of code in the right
places. Refer to the <a href="demo">demo</a> on my
<a href="https://github.com/luiarthur/luiarthur.github.io/tree/master/posts/cucumber/demo">Github</a>.
And in line 6 of &#39;/js/cucumber.js&#39;, change &#39;luifireapp&#39; to whatever you named
your firebase app to be (e.g.  mycucumberapp).</p>


                <!--Comments-->
                <div id="cucumber"></div>

                <!-- Pager -->
                <ul class="pager">
                    
                    <li class="previous">
                      <a href='/posts/langcompare'>&larr;Language Comparisons</a>
                    </li>
                    

                    
                    <li class="next">
                      <a href='/posts/markdown'>&rarr;First Markdown</a>
                    </li>    
                    
                  </ul>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
      <div id="includeFooter"></div>
    </footer>

</body>

</html>
